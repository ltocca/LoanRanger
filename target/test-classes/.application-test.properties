# ===================================================================
# Spring Boot Development Profile (with Testcontainers)
#
# How to use:
# 1. In your IDE, set the active Spring Boot profile to "dev".
# 2. Or, run from the command line: mvn spring-boot:run -Dspring-boot.run.profiles=dev
#
# This configuration uses the Testcontainers JDBC driver to automatically
# start and configure a PostgreSQL container for the application to use.
# ===================================================================

# ===================================================================
# DATABASE CONFIGURATION (TESTCONTAINERS)
# ===================================================================
# This special JDBC URL tells Spring Boot to start a PostgreSQL Testcontainer.
# - jdbc:tc: - The prefix for the Testcontainers JDBC driver.
# - postgresql:15-alpine - The Docker image to use.
# - ///loanranger_db - The database name to create inside the container.
# - ?TC_REUSABLE=true - A huge development performance boost! This keeps the
#   container running between application restarts. On the first run, it will
#   be slow, but subsequent runs will be almost instant. The container is
#   removed when the JVM process that started it terminates.
#spring.datasource.url=jdbc:tc:postgresql:17-alpine:///loanranger_test_db?TC_REUSABLE=true
#spring.datasource.driverClassName=org.testcontainers.jdbc.ContainerDatabaseDriver

# No username/password needed. The Testcontainers driver handles this automatically.

# ===================================================================
# DATABASE INITIALIZATION
# ===================================================================
# Automatically run schema.sql and data.sql on startup.
# This ensures your database is always in a known state when you start the app.
# Spring Boot will look for schema.sql and data.sql in src/main/resources.
spring.sql.init.mode=never

# This is good practice when using JPA/Hibernate, but doesn't harm a pure JDBC app.
# It ensures schema.sql runs before any ORM attempts to validate the schema.
spring.jpa.defer-datasource-initialization=true

# ===================================================================
# LOGGING
# ===================================================================
# Show the actual SQL statements being executed by Spring's JdbcTemplate.

# ===================================================================
# APPLICATION SERVICES CONFIGURATION
# ===================================================================
# Disable real email sending during local development.
# The EmailService will print a mock email to the console instead.
mail.enabled=false

# The "from" address for the email service.
spring.mail.username=loanranger@mail.ltocca.dev

# Existing properties from last time
logging.level.org.springframework.test.context.jdbc.SqlScriptUtils=DEBUG
logging.level.org.springframework.jdbc.datasource.init.ScriptUtils=DEBUG
logging.level.org.springframework.transaction=DEBUG
logging.level.org.springframework.jdbc.core=DEBUG
logging.level.org.postgresql=DEBUG
logging.level.org.testcontainers=INFO

# Potentially add this for more context around test method execution
logging.level.org.springframework.test=DEBUG